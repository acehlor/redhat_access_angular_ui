ul#tab_list.nav.nav-tabs(role="tablist")
  li(ng-class='{"active": discussion}')
    a(ng-click='toggleDiscussion()', data-toggle="tab") {{'Case Discussion'|translate}}
  li(ng-class='{"active": attachments}')
    a(ng-click='toggleAttachments()',  data-toggle="tab", ng-hide="DiscussionService.attachments.length === 0") {{'All Attachments'|translate}}
  li(ng-class='{"active": notes}', ng-hide="securityService.loginStatus.authedUser.is_internal")
    a(ng-click='toggleNotes()', data-toggle="tab") {{'Private Notes'|translate}}
  li(ng-class='{"active": bugzillas}', ng-show="securityService.loginStatus.authedUser.is_internal || CaseService.kase.bugzillas.bugzilla.length > 0")
    a(ng-click='toggleBugzillas()', data-toggle="tab") {{'Bugzilla Tickets'|translate}}
.tab-content
  #pane1.tab-pane(ng-class='{"active": discussion}')
    .row
      .col-xs-12
        // Add Comment Section
        div(rha-addcommentsection='', loading='loading.comments')
    .row(ng-hide="DiscussionService.discussionElements.length===0")
      .col-sm-7
        label {{'Sort By'|translate}}&nbsp;&nbsp;
        select#rha-comment-sort(chosen,
          width='"auto"',
          ng-init="DiscussionService.commentSortOrder = commentSortOrderList[0]"
          ng-model='DiscussionService.commentSortOrder',
          ng-change='onSortOrderChange()',
          ng-options='commentOrder as commentOrder.name for commentOrder in commentSortOrderList')
    .row.case-discussion
      .col-xs-12
        article.comment.article-comment
          i.fa.fa-comments-o
          h4.meta Message From Associate
          .byline
            strong.author By Spenser Shumaker&nbsp;
            strong.date 03/26/2015
          .content Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean pharetra ipsum nec dolor interdum, sit amet molestie odio consequat. Donec molestie nulla sed arcu aliquam feugiat. Maecenas lorem risus, condimentum id porttitor ut, pulvinar lobortis ante. Nullam tellus ex, pellentesque ut diam eget, pellentesque malesuada erat. Pellentesque mauris velit, fringilla in tincidunt quis, molestie non ipsum. Integer tempus posuere venenatis. Sed ut aliquam neque.
        article.comment.article-private-comment
          i.fa.fa-comments-o
          h4.meta Private Message From Associate
          .byline
            strong.author By Spenser Shumaker&nbsp;
            strong.date 03/26/2015
          .content Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean pharetra ipsum nec dolor interdum, sit amet molestie odio consequat. Donec molestie nulla sed arcu aliquam feugiat. Maecenas lorem risus, condimentum id porttitor ut, pulvinar lobortis ante. Nullam tellus ex, pellentesque ut diam eget, pellentesque malesuada erat. Pellentesque mauris velit, fringilla in tincidunt quis, molestie non ipsum. Integer tempus posuere venenatis. Sed ut aliquam neque.
        article.comment.article-attachment
          i.fa.fa-file-text-o
          h4.meta Attachement
          .byline
            strong.author By Spenser Shumaker&nbsp;
            strong.date 03/26/2015
          .content Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean pharetra ipsum nec dolor interdum, sit amet molestie odio consequat. Donec molestie nulla sed arcu aliquam feugiat. Maecenas lorem risus, condimentum id porttitor ut, pulvinar lobortis ante. Nullam tellus ex, pellentesque ut diam eget, pellentesque malesuada erat. Pellentesque mauris velit, fringilla in tincidunt quis, molestie non ipsum. Integer tempus posuere venenatis. Sed ut aliquam neque.

        div(id="{{element.id}}", ng-repeat="element in DiscussionService.discussionElements | orderBy:'sortModifiedDate':commentSortOrder", ng-if='!element.draft')
          article.comment(ng-if="!element.file_name || element.comment_type === 'chat' && element.public === true")
            h4.meta
              {{element.created_by}} {{'on'|translate}} &nbsp;
              date.light {{element.created_date}} &nbsp;
              span.light {{'at'|translate}} &nbsp;
              time.light {{element.created_time}}
            blockquote.dialog-box.pre-wrap
              span(ng-if="ie8 || ie9", style='word-wrap: normal; word-break: normal;') {{element.text}}
              span(ng-if="!ie8 && !ie9", ng-bind-html="parseCommentHtml(element)")
              a.glyphicon.glyphicon-link.pull-right(ng-click='CaseService.scrollToComment(element.id)' ng-href='#/case/{{CaseService.kase.case_number}}?commentId={{element.id}}')
              a.pull-right.commentReply(ng-click='commentReply(element,(ie8 || ie9))', href='') {{'Reply'|translate}} &nbsp;
          article.private-comment(ng-if="!element.file_name || element.comment_type === 'chat' && element.public === false")
            h4.meta {{element.created_by}} {{'on'|translate}} &nbsp;
              date.light {{element.created_date}} &nbsp;
              span.light {{'at'|translate}} &nbsp;
              time.light {{element.created_time}}
            blockquote.dialog-box.pre-wrap
              span(ng-if="ie8 || ie9", style='word-wrap: normal; word-break: normal;') {{element.text}}
              span(ng-if="!ie8 && !ie9", ng-bind-html="parseCommentHtml(element)")
              a.glyphicon.glyphicon-link.pull-right(ng-click='CaseService.scrollToComment(element.id)' ng-href='#/case/{{CaseService.kase.case_number}}?commentId={{element.id}}')
              a.pull-right.commentReply(ng-click='commentReply(element,(ie8 || ie9))', href='') {{'Reply'|translate}} &nbsp;
            .private {{'This element is Private'|translate}}
          article.attachment(ng-if="element.file_name")
            h4.meta()
              {{element.created_by}} {{'on'|translate}} &nbsp;
              date.light {{element.created_date}} &nbsp;
              span.light {{'at'|translate}} &nbsp;
              time.light {{element.created_time}}
            .dialog-box
              a(href="{{element.uri}}")
                .fa.fa-file-image-o.file-upload
                span {{element.file_name}} ({{element.length | bytes}})
              .fa.fa-close.pull-right(type='button', style='cursor: pointer;', ng-click='deleteAttachment(element)')
              .description.margin-top-short(ng-show="element.description") {{element.description}}
          article.chat(ng-id="element.public === true")
            h4.meta(ng-if="element.comment_type === 'chat'")
              span {{'Transcript of chat between'|translate}}
              .author.blue {{element.agent_name}}
              span {{'and'|translate}}
              .author.blue {{element.visitor_name}}
              date.light {{element.last_modified_date}} &nbsp;
              span.light {{'at'|translate}} &nbsp;
              time.light {{element.last_modified_time}}
            blockquote.dialog-box.pre-wrap(ng-if="element.comment_type === 'chat'", ng-bind-html="parseCommentHtml(element)")

  #pane2.tab-pane(ng-class='{"active": attachments}')
    article.row(id="{{attachment.id}}", ng-repeat="attachment in DiscussionService.attachments | orderBy:'sortModifiedDate':'reverse'")
      .col-sm-4
        h4.meta
          .author.blue {{attachment.created_by}}
          date.light {{attachment.created_date}}
          span.lightÂ at &nbsp;
          time.light {{attachment.created_time}}
      .col-sm-8
        .dialog-box
            a(href="{{attachment.uri}}")
              .fa.fa-file-image-o.file-upload
              span {{attachment.file_name}} ({{attachment.length | bytes}})
            .fa.fa-close.pull-right(type='button', style='float: right; cursor: pointer;', ng-click='deleteAttachment(attachment)')
            .description.margin-top-short(ng-show="attachment.description") {{attachment.description}}
  #pane3.tab-pane(ng-hide="securityService.loginStatus.authedUser.is_internal", ng-class='{"active": notes}')
    form(name='notesForm')
      div
        label(for='rha-case-notes') {{'Notes:'|translate}}
      div
        span#notesTooltip.uploadNotice
          span {{"Please note, contents of this field are not visible to Red Hat Support professionals."|translate}}
      .row
        .col-xs-12
          textarea#rha-case-notes(
            style='width: 100%; height: 70px; max-width: 100%;',
            ng-model='CaseService.kase.notes',
            maxlength='255',
            name='notes')
      .row.row-short
        .col-sm-7
          span#notesNotice.uploadNotice
            span.progressCount {{noteCharactersLeft}}
            span {{' characters left.'|translate}}
        .col-sm-5
          .pull-right
            button.btn.btn-accent.btn-submit(ng-click="updateNotes()", ng-disabled='CaseService.updatingCase || !notesForm.$dirty',translate='') Update
            a.margin-left(ng-click="discardNotes()", ng-disabled='CaseService.updatingCase || !notesForm.$dirty') {{'Discard Changes'|translate}}
  #pane4.tab-pane(ng-if="securityService.loginStatus.authedUser.is_internal || CaseService.kase.bugzillas.bugzilla.length > 0", ng-class='{"active": bugzillas}')
    div(rha-listbugzillas)
